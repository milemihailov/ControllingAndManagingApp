@page "/print"
@inject Data.PrintingService print
@inject Data.ConnectionServiceSerial serial

@using MachineControlHub.Motion;

<h3>Print</h3>

<button @onclick = "() => {print.StartPrint(fileToPrint);print.StartTimeOfPrint();print.GetFileNameAndSize(fileToPrint);}">Start Print</button>
<button @onclick = "print.PausePrint">Pause Print</button>
<button @onclick = "print.StopPrint">Stop Print</button>
<br />
<br />

<p>Choose a file:</p>

<select @bind=fileToPrint>
    @foreach (var file in files)
    {
        <option value=@file>@file</option>
    }
</select>
<br />
<br />

<p>File printing: <strong>@print.printName</strong></p>
<p>Estimated print time:</p>
<p>Elapsed print time:</p>
<p>Start time: <strong>@print.startTimeOfPrint</strong></p>
<p>File Size: <strong>@print.fileSize MB</strong></p>


@code {
    public string fileToPrint = "";

    public List<string> files;

    protected override void OnInitialized()
    {
        files = print.ListSDFiles();
        base.OnInitialized();
    }
}
